services:
  risuai:
    container_name: risuai
    image: ghcr.io/kwaroran/risuai:latest
    restart: always
    networks:
      - proxy
      - genai
    volumes:
      - ${DATA_DIR}:/app/save
    labels:
      # Traefik integration
      - "traefik.enable=true"
      - "traefik.http.routers.risu.entrypoints=websecure"
      - "traefik.http.routers.risu.rule=Host(`risu.${TRAEFIK_ACME_DOMAIN}`)"
      - "traefik.http.routers.risu.tls.certresolver=cloudflare"
      - "traefik.http.services.risu.loadbalancer.server.port=${RISUAI_PORT}"
      # Homepage integration
      - "homepage.group=Artificial Intelligence"
      - "homepage.name=RisuAI"
      - "homepage.icon=/icons/risuai.png"
      - "homepage.href=https://risu.${TRAEFIK_ACME_DOMAIN}"
      - "homepage.description=User-friendly software for LLM roleplaying"

networks:
  proxy:
    external: true
  genai:
    internal: true
