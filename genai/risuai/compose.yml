services:
  risuai:
    container_name: risuai
    image: ghcr.io/kwaroran/risuai:latest
    restart: "no"
    networks:
      - proxy
    volumes:
      - ${DATA_DIR}:/app/save
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.risu.entrypoints=websecure"
      - "traefik.http.routers.risu.rule=Host(`risu.${TRAEFIK_ACME_DOMAIN}`)"
      - "traefik.http.routers.risu.tls.certresolver=cloudflare"
      - "traefik.http.services.risu.loadbalancer.server.port=6001"
      - "homepage.group=Artificial Intelligence"
      - "homepage.name=RisuAI"
      - "homepage.icon=/icons/risuai.png"
      - "homepage.href=https://risu.${TRAEFIK_ACME_DOMAIN}"
      - "homepage.description=User-friendly software for LLM roleplaying"
    deploy:
      resources:
        limits:
          memory: 1GB

networks:
  proxy:
    external: true
